<html><head><base href="https://objects.ncs/">
<title>Objects on NCS Music</title>
<style>
body {
    margin: 0;
    padding: 0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: white;
    font-family: Arial, sans-serif;
}

.container {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    width: 100vw;
    position: fixed;
}

#randomImage {
    max-width: 375px;
    max-height: 375px;
    margin: 20px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    opacity: 0;
    display: none;
}

#timer {
    position: fixed;
    top: 20px;
    font-size: 24px;
    font-family: monospace;
    visibility: hidden;
}

button {
    padding: 15px 30px;
    font-size: 18px;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    transition: background 0.3s ease;
    margin: 20px;
    z-index: 100;
}

#generateButton {
    position: fixed;
    bottom: 20px;
}

button:hover {
    background: #45a049;
}

.audio-player {
    margin: 20px;
    visibility: hidden;
    position: fixed;
    bottom: -100px;
}

.edit-menu {
    position: fixed;
    bottom: 100px;
    left: 20px;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
    display: none;
    max-height: 70vh;
    overflow-y: auto;
    z-index: 1000;
}

.edit-menu select {
    width: 200px;
    padding: 10px;
    margin: 10px;
    border-radius: 5px;
    border: 1px solid #ccc;
}

.edit-menu label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
}

.edit-menu input[type="file"] {
    width: 200px;
    margin: 10px;
    padding: 5px;
}

.reset-button {
    padding: 5px 10px;
    font-size: 14px;
    background: #ff4444;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-left: 10px;
}

.reset-button:hover {
    background: #cc3333;
}

#applyButton {
    background: #2196F3;
    margin-top: 20px;
}

#applyButton:hover {
    background: #1976D2;
}

#delayInputContainer {
    margin: 10px;
}

#delayInput {
    width: 100px;
    padding: 5px;
    border-radius: 5px;
    border: 1px solid #ccc;
}

.search-container {
    margin: 10px 0;
    width: 100%;
}

.search-input {
    width: 200px;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 14px;
}

.search-input:focus {
    outline: none;
    border-color: #2196F3;
    box-shadow: 0 0 5px rgba(33, 150, 243, 0.3);
}

.hidden-option {
    display: none !important;
}

optgroup {
    font-weight: bold;
    font-style: normal;
    background: #f5f5f5;
    padding: 5px;
}

optgroup option {
    font-weight: normal;
    padding-left: 15px;
    background: white;
}

.counter-container {
    margin-top: 20px;
    font-size: 14px;
}
</style>
</head>
<body>
    <div id="timer">0.00</div>
    <div class="container">
        <img id="randomImage" width="375" height="375">
        <audio id="audioPlayer" class="audio-player" controls loop></audio>
        <button id="generateButton" onclick="generateRandomPairing()">Generate New Image</button>
    </div>

    <div id="editMenu" class="edit-menu">
        <div class="search-container">
            <input type="text" id="imageSearch" placeholder="Search images..." class="search-input">
        </div>
        <label for="imageSelect">Select Image:</label>
        <select id="imageSelect"></select>
        
        <div class="search-container">
            <input type="text" id="soundSearch" placeholder="Search songs..." class="search-input">
        </div>
        <label for="soundSelect">Select Song:</label>
        <select id="soundSelect"></select>
        
        <label for="imageUpload">Or Upload Image:</label>
        <input type="file" id="imageUpload" accept="image/*">
        <button type="button" class="reset-button" onclick="resetImageUpload()">Remove Upload</button>
        
        <label for="soundUpload">Or Upload Song:</label>
        <input type="file" id="soundUpload" accept="audio/*">
        <button type="button" class="reset-button" onclick="resetSoundUpload()">Remove Upload</button>
        
        <div id="delayInputContainer" style="display: none;">
            <label for="delayInput">Set Image Delay (seconds):</label>
            <input type="number" id="delayInput" step="0.01" min="0" value="10">
        </div>
        
        <button id="applyButton" onclick="applyCustomPairing()">Apply</button>
        <div class="counter-container">
            <span id="imageCount"></span> images, <span id="soundCount"></span> songs
        </div>
    </div>

<script>
const images = [
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/cantaloupe.jpg",
        name: "Cantaloupe",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/acorn.png",
        name: "Acorn",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/apple.png",
        name: "Apple",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/avocado.png",
        name: "Avocado",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/bananas.png",
        name: "Bananas",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/blackberries.png",
        name: "Blackberries",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/blueberries.png",
        name: "Blueberries",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/cherry.png",
        name: "Cherry",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/coconut.png",
        name: "Coconut",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/dragonfruit.png",
        name: "Dragon Fruit",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/durian.png",
        name: "Durian",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/grapesgreen.png",
        name: "Grapes (Green)",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/grapespurple.png",
        name: "Grapes (Purple)",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/grapesred.png",
        name: "Grapes (Red)",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/honeydew.png",
        name: "Honeydew Melon",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/kiwi.png",
        name: "Kiwi",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/kiwibird.png",
        name: "Kiwi?",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/lemon.png",
        name: "Lemon",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/mango.png",
        name: "Mango",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/mangosteen.png",
        name: "Mangosteen",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/orange.png",
        name: "Orange",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/annoyingorange.png",
        name: "Annoying Orange",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/papaya.png",
        name: "Papaya",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/peach.png",
        name: "Peach",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pear.png",
        name: "Pear",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pineapple.png",
        name: "Pineapple",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/plum.png",
        name: "Plum",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pomegranate.png",
        name: "Pomegranate",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/raspberries.png",
        name: "Raspberries",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/strawberry.png",
        name: "Strawberry",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/tomato.png",
        name: "Tomato",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/watermelon.png",
        name: "Watermelon",
        category: "Fruits"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/asparagus.png",
        name: "Asparagus",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/beet.png",
        name: "Beet",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/bellpeppergreen.png",
        name: "Bell Pepper (Green)",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/bellpepperorange.png",
        name: "Bell Pepper (Orange)",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/bellpepper.png",
        name: "Bell Pepper (Red)",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/bellpepper.png",
        name: "Broccoli",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/carrot.png",
        name: "Carrot",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/cauliflower.png",
        name: "Cauliflower",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/celery.png",
        name: "Celery",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/corn.png",
        name: "Corn",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/cucumber.png",
        name: "Cucumber",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/eggplant.png",
        name: "Eggplant",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/garlic.png",
        name: "Garlic",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/jackolantern.png",
        name: "Jack-o-Lantern",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/jalapeno.png",
        name: "Jalapeno",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/lettuce.png",
        name: "Lettuce",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/mushroom.png",
        name: "Mushroom",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/onion.png",
        name: "Onion",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pumpkin.png",
        name: "Pumpkin",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/squash.png",
        name: "Squash",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/turnips.png",
        name: "Turnips",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/peas.png",
        name: "Peas",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/potato.png",
        name: "Potato",
        category: "Vegetables"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/burger.png",
        name: "Burger",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/cake.png",
        name: "Cake",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/cheese.png",
        name: "Cheese",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/chickennugget.png",
        name: "Chicken Nugget",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/donuts.png",
        name: "Donuts",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/dough.png",
        name: "Dough",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/egg.png",
        name: "Egg",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/fries.png",
        name: "Fries",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/gelatin.png",
        name: "Gelatin",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/hotdog.png",
        name: "Hot Dog",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/icecream.png",
        name: "Ice Cream",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/icecube.png",
        name: "Ice Cubes",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/lemonade.png",
        name: "Lemonade",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/lollipop.png",
        name: "Lollipop",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/marshmallow.png",
        name: "Marshmallow",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/oj.png",
        name: "Orange Juice",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pickles.png",
        name: "Pickles",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pie.png",
        name: "Pie",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pizza.png",
        name: "Pizza",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pumpkinpie.png",
        name: "Pumpkin Pie",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/rice.png",
        name: "Rice",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/tacos.png",
        name: "Tacos",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/teacup.png",
        name: "Tea",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/water.png",
        name: "Water Bottle",
        category: "Food & Drinks"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/bottle.png",
        name: "Bottle",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/tissues.png",
        name: "Box of Tissues",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/candle.png",
        name: "Candle",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/chair.png",
        name: "Chair",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/clock.png",
        name: "Clock",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/fan.png",
        name: "Fan",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/gate.png",
        name: "Gate",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/lightswitch.png",
        name: "Light Switch",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pillow.png",
        name: "Pillow",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/plate.png",
        name: "Plate",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/soap.png",
        name: "Soap",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/soapbar.png",
        name: "Soap Bar",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/sponge.png",
        name: "Sponge",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/table.png",
        name: "Table",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/toilet.png",
        name: "Toilet",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/toiletpaper.png",
        name: "Toilet Paper",
        category: "Household Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/fork.png",
        name: "Fork",
        category: "Kitchen Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/knife.png",
        name: "Knife",
        category: "Kitchen Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pepper.png",
        name: "Pepper",
        category: "Kitchen Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/salt.png",
        name: "Salt",
        category: "Kitchen Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/spoon.png",
        name: "Spoon",
        category: "Kitchen Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/spork.png",
        name: "Spork",
        category: "Kitchen Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/teakettle.png",
        name: "Tea Kettle",
        category: "Kitchen Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/paper.png",
        name: "Paper",
        category: "Office Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pencil.png",
        name: "Pencil",
        category: "Office Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/eraser.png",
        name: "Eraser",
        category: "Office Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pencilsharpener.png",
        name: "Pencil Sharpeners",
        category: "Office Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/ruler.png",
        name: "Ruler",
        category: "Office Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/calc.png",
        name: "Calculator",
        category: "Office Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/scissors.png",
        name: "Scissors",
        category: "Office Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pen.png",
        name: "Pen",
        category: "Office Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/marker.png",
        name: "Marker",
        category: "Office Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/stapler.png",
        name: "Stapler",
        category: "Office Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/filecabinet.png",
        name: "File Cabinet",
        category: "Office Items"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/hammer.png",
        name: "Hammer",
        category: "Tools"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/lawnmower.png",
        name: "Lawn Mower",
        category: "Tools"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/nails.png",
        name: "Nails",
        category: "Tools"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/saw.png",
        name: "Saw",
        category: "Tools"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/computer.png",
        name: "Computer",
        category: "Electronics"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/microphone.png",
        name: "Microphone",
        category: "Electronics"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/phone.png",
        name: "Phone",
        category: "Electronics"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/remote.png",
        name: "Remote",
        category: "Electronics"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/speakers.png",
        name: "Speakers",
        category: "Electronics"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/tv.png",
        name: "TV",
        category: "Electronics"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/8ball.png",
        name: "8-Ball",
        category: "Toys & Games"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/block.png",
        name: "Wood Block",
        category: "Toys & Games"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/football.png",
        name: "Football",
        category: "Sports Equipment"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/soccerball.png",
        name: "Soccer Ball",
        category: "Sports Equipment"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/golfball.png",
        name: "Golf Ball",
        category: "Sports Equipment"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/tennisball.png",
        name: "Tennis Ball",
        category: "Sports Equipment"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/tennisracket.png",
        name: "Tennis Racket",
        category: "Sports Equipment"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/basketball.png",
        name: "Basketball",
        category: "Sports Equipment"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/baseball.png",
        name: "Baseball",
        category: "Sports Equipment"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/clover.png",
        name: "Clover",
        category: "Nature"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/leaf.png",
        name: "Leaf",
        category: "Nature"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/rock.png",
        name: "Rock",
        category: "Nature"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/therock.png",
        name: "The Rock",
        category: "Nature"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/tree.png",
        name: "Tree",
        category: "Nature"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/checkbook.png",
        name: "Checkbook",
        category: "Money"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/dime.png",
        name: "Dime",
        category: "Money"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/dollar.png",
        name: "Dollar",
        category: "Money"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/nickel.png",
        name: "Nickel",
        category: "Money"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/coin.png",
        name: "Penny",
        category: "Money"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/quarter.png",
        name: "Quarter",
        category: "Money"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/wallet.png",
        name: "Wallet",
        category: "Money"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/balloon.png",
        name: "Balloon",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/barrel.png",
        name: "Barrel",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/bell.png",
        name: "Bell",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/book.png",
        name: "Book",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/bow.png",
        name: "Bow",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/box.png",
        name: "Box",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/bracelet.png",
        name: "Bracelet",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/brick.png",
        name: "Brick",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/bubble.png",
        name: "Bubble",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/lifering.png",
        name: "Lifering",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/lightbulb.png",
        name: "Lightbulb",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/match.png",
        name: "Match",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/needle.png",
        name: "Needle",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/paintbrush.png",
        name: "Paintbrush",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/paperbag.png",
        name: "Paper Bag",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pushpin.png",
        name: "Pin",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/pricetag.png",
        name: "Price Tag",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/ruby.png",
        name: "Ruby",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/smallglassjar.png",
        name: "Small Glass Jar",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/snowball.png",
        name: "Snow Ball",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/stopwatch.png",
        name: "Stopwatch",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/suitcase.png",
        name: "Suitcase",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/testtubes.png",
        name: "Test Tubes",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/trophy.png",
        name: "Trophy",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/yinyang.png",
        name: "Yin-Yang",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/websim.png",
        name: "Websim",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/sean.png",
        name: "sean",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/lemur.png",
        name: "Lemur",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/grumpycatkeychain.png",
        name: "Grumpy Cat Keychain",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/rat.png",
        name: "rat",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/yahamouse.png",
        name: "yahamouse",
        category: "Miscellaneous"
    },
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/images/loss.png",
        name: "Loss",
        category: "Miscellaneous"
    }
];

const sounds = [
    {
        src: "https://file.garden/ZxmC4yQL6hzekzvV/ncsobjects/music/firefly.mp3",
        name: "Jim Yosef - Firefly",
        delay: 14.77
    }
];

function populateSelectMenus() {
    const imageSelect = document.getElementById('imageSelect');
    const soundSelect = document.getElementById('soundSelect');
    
    // Clear existing options
    imageSelect.innerHTML = '';
    soundSelect.innerHTML = '';
    
    // Group images by category
    const categorizedImages = {};
    images.forEach(image => {
        if (!categorizedImages[image.category]) {
            categorizedImages[image.category] = [];
        }
        categorizedImages[image.category].push(image);
    });
    
    // Get category order based on first appearance in images array
    const categoryOrder = [];
    images.forEach(image => {
        if (!categoryOrder.includes(image.category)) {
            categoryOrder.push(image.category);
        }
    });
    
    // Add categorized images to select menu in the order they appear
    categoryOrder.forEach(category => {
        const optgroup = document.createElement('optgroup');
        optgroup.label = category;
        
        categorizedImages[category].forEach(image => {
            const option = document.createElement('option');
            option.value = image.src;
            option.textContent = image.name;
            optgroup.appendChild(option);
        });
        
        imageSelect.appendChild(optgroup);
    });
    
    // Add sounds to select menu (unchanged)
    sounds.forEach(sound => {
        const option = document.createElement('option');
        option.value = sound.src;
        option.textContent = sound.name;
        soundSelect.appendChild(option);
    });
    
    // Update image and sound counts
    updateCounts();
    
    // Setup search functionality
    setupSearch();
}

function updateCounts() {
    const imageCount = document.getElementById('imageCount');
    const soundCount = document.getElementById('soundCount');

    imageCount.textContent = images.length;
    soundCount.textContent = sounds.length;
}

function setupSearch() {
    const imageSearch = document.getElementById('imageSearch');
    const soundSearch = document.getElementById('soundSearch');
    
    imageSearch.addEventListener('input', function() {
        filterOptions('imageSelect', this.value);
    });
    
    soundSearch.addEventListener('input', function() {
        filterOptions('soundSelect', this.value);
    });
}

function filterOptions(selectId, searchText) {
    const select = document.getElementById(selectId);
    const searchTerms = searchText.toLowerCase().split(' ');
    
    if (selectId === 'imageSelect') {
        // Handle grouped options
        const optgroups = select.getElementsByTagName('optgroup');
        for (let optgroup of optgroups) {
            let visibleOptions = 0;
            const options = optgroup.getElementsByTagName('option');
            
            for (let option of options) {
                const text = option.textContent.toLowerCase();
                const matchesAll = searchTerms.every(term => text.includes(term));
                
                if (matchesAll) {
                    option.classList.remove('hidden-option');
                    visibleOptions++;
                } else {
                    option.classList.add('hidden-option');
                }
            }
            
            // Show/hide optgroup based on if it has any visible options
            optgroup.style.display = visibleOptions > 0 ? '' : 'none';
        }
    } else {
        // Handle regular options (for sound select)
        const options = select.getElementsByTagName('option');
        for (let option of options) {
            const text = option.textContent.toLowerCase();
            const matchesAll = searchTerms.every(term => text.includes(term));
            
            if (matchesAll) {
                option.classList.remove('hidden-option');
            } else {
                option.classList.add('hidden-option');
            }
        }
    }
}

function handleFileUpload(file, type) {
    return new Promise((resolve) => {
        const reader = new FileReader();
        reader.onload = (e) => {
            resolve(e.target.result);
        };
        reader.readAsDataURL(file);
    });
}

async function applyCustomPairing() {
    let selectedImageSrc = document.getElementById('imageSelect').value;
    let selectedSoundSrc = document.getElementById('soundSelect').value;
    
    // Handle image upload if present
    const imageFile = document.getElementById('imageUpload').files[0];
    if (imageFile) {
        selectedImageSrc = await handleFileUpload(imageFile, 'image');
    }
    
    // Handle sound upload if present
    const soundFile = document.getElementById('soundUpload').files[0];
    if (soundFile) {
        selectedSoundSrc = await handleFileUpload(soundFile, 'audio');
        // Create temporary sound object for uploaded audio with custom delay
        const customDelay = parseFloat(document.getElementById('delayInput').value) || 10;
        currentSound = {
            src: selectedSoundSrc,
            name: soundFile.name,
            delay: customDelay
        };
    } else {
        currentSound = sounds.find(sound => sound.src === selectedSoundSrc);
    }
    
    hideImage();
    
    if (currentImageTimeout) {
        clearTimeout(currentImageTimeout);
    }
    
    if (timerInterval) {
        clearInterval(timerInterval);
    }
    document.getElementById('timer').textContent = "0.00";
    
    const imgElement = document.getElementById('randomImage');
    imgElement.src = selectedImageSrc;
    
    const audioPlayer = document.getElementById('audioPlayer');
    audioPlayer.src = selectedSoundSrc;
    
    audioPlayer.load();
    audioPlayer.play().catch(error => {
        console.log("Audio playback failed:", error);
    });
}

function resetImageUpload() {
    const imageUpload = document.getElementById('imageUpload');
    imageUpload.value = ''; // Clear the file input
    document.getElementById('imageSelect').selectedIndex = 0; // Reset dropdown to first option
}

function resetSoundUpload() {
    const soundUpload = document.getElementById('soundUpload');
    soundUpload.value = ''; // Clear the file input
    document.getElementById('soundSelect').selectedIndex = 0; // Reset dropdown to first option
    document.getElementById('delayInputContainer').style.display = 'none'; // Hide delay input
}

function getRandomElement(array) {
    return array[Math.floor(Math.random() * array.length)];
}

function showImage() {
    const imgElement = document.getElementById('randomImage');
    imgElement.style.display = "block";
    imgElement.style.opacity = "1";
}

function hideImage() {
    const imgElement = document.getElementById('randomImage');
    imgElement.style.display = "none";
    imgElement.style.opacity = "0";
}

let currentSound;
let timerInterval;
let currentImageTimeout;

function startTimer(delay) {
    let startTime = Date.now();
    const timerElement = document.getElementById('timer');
    
    if (timerInterval) {
        clearInterval(timerInterval);
    }
    
    timerInterval = setInterval(() => {
        let elapsedTime = (Date.now() - startTime) / 1000;
        if (elapsedTime >= delay) {
            clearInterval(timerInterval);
            timerElement.textContent = delay.toFixed(2);
        } else {
            timerElement.textContent = elapsedTime.toFixed(2);
        }
    }, 10);
}

function generateRandomPairing() {
    if (currentImageTimeout) {
        clearTimeout(currentImageTimeout);
    }
    
    hideImage();
    
    if (timerInterval) {
        clearInterval(timerInterval);
    }
    document.getElementById('timer').textContent = "0.00";
    
    const randomImage = getRandomElement(images);
    currentSound = getRandomElement(sounds);
    
    const imgElement = document.getElementById('randomImage');
    imgElement.src = randomImage.src;
    
    const audioPlayer = document.getElementById('audioPlayer');
    audioPlayer.src = currentSound.src;
    
    audioPlayer.load();
    audioPlayer.play().catch(error => {
        console.log("Audio playback failed:", error);
    });
}

window.onload = function() {
    const audioPlayer = document.getElementById('audioPlayer');
    
    audioPlayer.addEventListener('play', function() {
        if (currentSound) {
            startTimer(currentSound.delay);
            currentImageTimeout = setTimeout(showImage, currentSound.delay * 1000);
        }
    });

    generateRandomPairing();
    
    document.addEventListener('click', function() {
        audioPlayer.play().catch(error => {
            console.log("Audio playback failed:", error);
        });
    });
};

document.addEventListener('keydown', function(event) {
    // Only trigger space generation if not typing in a text input
    const activeElement = document.activeElement;
    const isTyping = activeElement.tagName === 'INPUT' && 
                     activeElement.type === 'text';
    
    if (event.code === 'Space' && !isTyping) {
        generateRandomPairing();
        event.preventDefault();
    }
});
</script>
</body></html>